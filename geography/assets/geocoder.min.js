function initMap(){map=new google.maps.Map(document.getElementById("map"),{zoom:5,scaleControl:!0}),layer=new google.maps.FusionTablesLayer({map:null,heatmap:{enabled:!1},query:{select:"col3>>1",from:"11ehP4Wuqzjozhe2iA3hKqhaC0r78Aquqe0QnYt1E",where:""},options:{styleId:2,templateId:2},styles:[{markerOptions:{optimized:!1}}]}),geocoder=new google.maps.Geocoder,defineStateBorders(),makeStates(),markRegions(),populateMap(),sidebar()}function showPopulation(){clearPolygons(),layer.setMap(map)}function hidePopulation(){clearPolygons(),layer.setMap(null)}function sidebar(){google.maps.event.addListener(map,"click",function(e){$(".sidebar.bottom").trigger("sidebar:close")})}function makeStates(){var e=0;for(stateCodes in stateBorders)statePolygon[e]=createPolyRegion(stateCodes),statePolygon[e].setMap(map),e++}function markRegions(){var e=0;for(stateCodes in stateBorders)"Washington"==stateCodes||"Montana"==stateCodes||"Oregon"==stateCodes||"Idaho"==stateCodes||"Wyoming"==stateCodes||"California"==stateCodes||"Nevada"==stateCodes||"Utah"==stateCodes||"Colorado"==stateCodes||"Alaska"==stateCodes||"Hawaii"==stateCodes?statePolygon[e].setOptions({strokeColor:"#0033cc",strokeOpacity:.4,strokeWeight:2,fillColor:"#d7c8ff",fillOpacity:.5,geodesic:!0,visible:!0}):"North Dakota"==stateCodes||"South Dakota"==stateCodes||"Nebraska"==stateCodes||"Kansas"==stateCodes||"Minnesota"==stateCodes||"Iowa"==stateCodes||"Missouri"==stateCodes||"Wisconsin"==stateCodes||"Illinois"==stateCodes||"Michigan"==stateCodes||"Indiana"==stateCodes||"Ohio"==stateCodes?statePolygon[e].setOptions({strokeColor:"#0033cc",strokeOpacity:.4,strokeWeight:2,fillColor:"#bef0fa",fillOpacity:.5,geodesic:!0,visible:!0}):"Arizona"==stateCodes||"New Mexico"==stateCodes||"Oklahoma"==stateCodes||"Texas"==stateCodes?statePolygon[e].setOptions({strokeColor:"#0033cc",strokeOpacity:.4,strokeWeight:2,fillColor:"#ffff99",fillOpacity:.5,geodesic:!0,visible:!0}):"Arkansas"==stateCodes||"Louisiana"==stateCodes||"Mississippi"==stateCodes||"Alabama"==stateCodes||"Tennessee"==stateCodes||"Kentucky"==stateCodes||"Florida"==stateCodes||"Georgia"==stateCodes||"North Carolina"==stateCodes||"South Carolina"==stateCodes||"Virginia"==stateCodes||"West Virginia"==stateCodes?statePolygon[e].setOptions({strokeColor:"#0033cc",strokeOpacity:.4,strokeWeight:2,fillColor:"#9bff9b",fillOpacity:.5,geodesic:!0,visible:!0}):("Main"==stateCodes||"Vermont"==stateCodes||"New Hampshire"==stateCodes||"Massachusetts"==stateCodes||"Connecticut"==stateCodes||"Rhode Island"==stateCodes||"New York"==stateCodes||"New Jersey"==stateCodes||"Delaware"==stateCodes||"Maryland"==stateCodes||"Pennsylvania"==stateCodes||"Maine"==stateCodes)&&statePolygon[e].setOptions({strokeColor:"#0033cc",strokeOpacity:.4,strokeWeight:2,fillColor:"#ff96c8",fillOpacity:.5,geodesic:!0,visible:!0}),google.maps.event.addListener(statePolygon[e],"mouseover",function(e){this.setOptions({fillOpacity:.8})}),google.maps.event.addListener(statePolygon[e],"mouseout",function(e){this.setOptions({fillOpacity:.5})}),e++}function clearPolygons(){var e=0;for(stateCodes in stateBorders)statePolygon[e].setOptions({visible:!1}),e++}function createPolyRegion(e){var o=new google.maps.Polygon({paths:stateBorders[e]});return o}function centerMap(e){geocoder.geocode({address:e},function(e,o){o==google.maps.GeocoderStatus.OK?map.setCenter(e[0].geometry.location):alert("Geocode was not successful for the following reason: "+o)})}function geocodeAddress(e,o,t,s){geocoder.geocode({address:e},function(a,i){if(i==google.maps.GeocoderStatus.OK){var n=new google.maps.Marker({map:map,position:a[0].geometry.location,optimized:!1});o&&n.addListener("click",function(){document.getElementById("mapinfo").innerHTML=o,$(".sidebar.bottom").trigger("sidebar:open"),"USA"==e&&n.setAnimation(null)}),t&&n.setIcon(t),s&&n.setAnimation(google.maps.Animation.BOUNCE)}else alert("Geocode was not successful for the following reason: "+i)})}function populateMap(){centerMap("USA"),geocodeAddress("USA",usaString,"http://maps.google.com/mapfiles/arrow.png",!0),geocodeAddress("Poland",polandString,"http://maps.google.com/mapfiles/arrow.png"),geocodeAddress("Selma, AL 36703",edmundPettusBridgeString),geocodeAddress("60 Gold St, Hartford, CT 06103",ancientBuryingGroundString),geocodeAddress("Arizona 86052",grandCanyonString),setTimeout(function(){geocodeAddress("600 Museum Way, Bentonville, AR 72712",crystalBridgesString),geocodeAddress("750 Hearst Castle Rd, San Simeon, CA 93452",hearstCastleString),geocodeAddress("Canyon Rd, Lumpkin, GA 31815",providenceCanyonString),geocodeAddress("Arches Scenic Dr, Moab, UT 84532",balancedRockString),geocodeAddress("350 Corvette Dr, Bowling Green, KY 42101",nationalCorvetteMuseumString),setTimeout(function(){geocodeAddress("49 north west, Boissevain, MB R0K 0E0, Canada",internationalPeaceGardenString)},3e3)},3e3)}var geocoder,map,layer,stateBorders,statePolygon=[];jQuery(function(e){e(document).on("change",'input:radio[id^="radio_regions"]',function(o){hidePopulation(),markRegions(),e(".sidebar.bottom").trigger("sidebar:close")}),e(document).on("change",'input:radio[id^="radio_red_blue"]',function(o){hidePopulation(),markRegions();var t=0;for(stateCodes in stateBorders)"California"==stateCodes||"Colorado"==stateCodes||"Connecticut"==stateCodes||"Delaware"==stateCodes||"Florida"==stateCodes||"Illinois"==stateCodes||"Iowa"==stateCodes||"Maine"==stateCodes||"Maryland"==stateCodes||"Massachusetts"==stateCodes||"Michigan"==stateCodes||"Minnesota"==stateCodes||"Nevada"==stateCodes||"New Hampshire"==stateCodes||"New Jersey"==stateCodes||"New Mexico"==stateCodes||"New York"==stateCodes||"Ohio"==stateCodes||"Oregon"==stateCodes||"Pennsylvania"==stateCodes||"Rhode Island"==stateCodes||"Vermont"==stateCodes||"Virginia"==stateCodes||"Washington"==stateCodes||"Wisconsin"==stateCodes?statePolygon[t].setOptions({strokeColor:"#2f2f2f",fillColor:"#0000ff",visible:!0}):statePolygon[t].setOptions({strokeColor:"#2f2f2f",fillColor:"#ff0000",visible:!0}),t++;e(".sidebar.bottom").trigger("sidebar:close")}),e(document).on("change",'input:radio[id^="radio_clear"]',function(o){hidePopulation(),e(".sidebar.bottom").trigger("sidebar:close")}),e(document).on("change",'input:radio[id^="radio_population"]',function(o){showPopulation(),e(".sidebar.bottom").trigger("sidebar:close")})});